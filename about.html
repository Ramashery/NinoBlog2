<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://firestore.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://www.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://www.youtube.com" crossorigin>
    <link rel="preconnect" href="https://i.ytimg.com" crossorigin>
    <link rel="dns-prefetch" href="//firestore.googleapis.com">
    <link rel="dns-prefetch" href="//www.gstatic.com">
    <link rel="dns-prefetch" href="//www.youtube.com">
    <link rel="dns-prefetch" href="//i.ytimg.com">
    <title>About Nino Kartsivadze | Cloisonne Enamel Artist</title>
    <meta name="description" content="Learn about Nino Kartsivadze, an artist of cloisonne enamel (Minankari) from Tbilisi, Georgia, and her unique handcrafted jewelry."> 
    
    <link rel="canonical" href="https://minankari.art/about.html" />

    <meta property="og:title" content="About Nino Kartsivadze | Cloisonne Enamel Artist" />
    <meta property="og:type" content="profile" />
    <meta property="og:description" content="Learn about Nino Kartsivadze, an artist of cloisonne enamel (Minankari) from Tbilisi, Georgia, and her unique handcrafted jewelry." />
    <meta property="og:image" content="https://minankari.art/nino-kartsivadze-photo.jpg" />
    <meta property="og:url" content="https://minankari.art/about.html" />
    <meta property="og:site_name" content="Cloisonne Enamel by Nino Kartsivadze" />
    
    <script type="application/ld+json" id="about-person-schema">{}</script>
    
    <style>
        :root { --primary: #D4AF37; --primary-dark: #9B7C2E; --bg: #121212; --bg-dark: #080808; --glass: rgba(255, 255, 255, 0.05); --glass-dark: rgba(0, 0, 0, 0.2); --text-light: rgba(255, 255, 255, 0.9); --text-dark: rgba(0, 0, 0, 0.8); --shadow-dark: rgba(0, 0, 0, 0.2); --shadow-light: rgba(255, 255, 255, 0.05); } * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Montserrat', sans-serif; } body { background: var(--bg); color: var(--text-light); overflow-x: hidden; min-height: 100vh; position: relative; } 
        #particles-js { position: fixed; width: 100%; height: 100%; top: 0; left: 0; z-index: 2; pointer-events: none; }
        .page-container, .related-container { max-width: 900px; margin: 2rem auto; padding: 2rem; background: var(--glass); border-radius: 24px; backdrop-filter: blur(12px); border: 1px solid rgba(212, 175, 55, 0.1); opacity: 0; transition: opacity 0.5s; position: relative; z-index: 1; display: none; }
        @media (min-width: 992px) { .page-container, .related-container { max-width: 1100px; } }
        .page-container.loaded, .related-container.loaded { opacity: 1; display: block; }
        .about-body { display: flow-root; }
        .about-details { line-height: 1.8; font-size: 1.1rem; }
        .about-details p { margin-bottom: 1em; } .about-details p:last-child { margin-bottom: 0; }
        .about-details a { color: var(--primary); text-decoration: none; border-bottom: 1px dotted var(--primary); transition: color 0.3s, background-color 0.3s; }
        .about-details a:hover { color: var(--bg-dark); background-color: var(--primary); }
        .slideshow-container { width: 100%; height: auto; aspect-ratio: 1 / 1; margin-bottom: 1.5rem; position: relative; border-radius: 16px; overflow: hidden; box-shadow: 4px 4px 8px var(--shadow-dark); -webkit-mask-image: -webkit-radial-gradient(white, black); background-color: var(--glass); }
        .slideshow-item { width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0; opacity: 0; transition: opacity 1.2s ease-in-out; pointer-events: none; }
        .slideshow-item.active { opacity: 1; }
        .slideshow-item-video { width: 140%; height: 140%; top: -20%; left: -20%; position: absolute; pointer-events: none; }
        .slideshow-item-video iframe { width: 100%; height: 100%; border: none; }
        .slideshow-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 2; cursor: grab; }
        .back-link { display: inline-block; margin-top: 2rem; color: var(--primary); text-decoration: none; text-align: center; width: 100%; clear: both; } .back-link:hover { text-decoration: underline; }
        @media (min-width: 768px) { .slideshow-container { float: left; width: 45%; max-width: 400px; margin-right: 2rem; margin-bottom: 1rem; } }
        .related-container { display: none; } .related-title { font-size: 2rem; color: var(--primary); font-weight: 300; text-align: center; margin-bottom: 2rem; } .related-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 2rem; }
        .product-card, .blog-post-card { display: flex; flex-direction: column; background: var(--glass); border-radius: 24px; box-shadow: 8px 8px 16px var(--shadow-dark), -8px -8px 16px var(--shadow-light); backdrop-filter: blur(12px); transition: transform 0.4s, box-shadow 0.4s; overflow: hidden; position: relative; border: 1px solid rgba(212, 175, 55, 0.1); text-decoration: none; color: var(--text-light); }
        .product-card:hover, .blog-post-card:hover { transform: translateY(-8px); box-shadow: 12px 12px 24px var(--shadow-dark), -12px -12px 24px var(--shadow-light); }
        .product-card .slideshow-container, .blog-post-card .slideshow-container { height: 250px; aspect-ratio: unset; clip-path: polygon(0 0, 100% 0, 100% 85%, 0 100%); transition: clip-path 0.5s ease; float: none; margin: 0; max-width: none; width: 100%; }
        .product-card:hover .slideshow-container, .blog-post-card:hover .slideshow-container { clip-path: polygon(0 0, 100% 0, 100% 100%, 0 85%); }
        .product-card .product-info, .blog-post-card .post-card-content { padding: 1.5rem; display: flex; flex-direction: column; flex-grow: 1; }
        .product-card .product-title, .blog-post-card .post-card-title { font-size: 1.2rem; margin-bottom: 0.5rem; color: var(--primary); }
        .product-card .product-price { font-size: 1rem; font-weight: 700; margin-bottom: 1rem; }
        .blog-post-card .post-card-subtitle { font-size: 1rem; font-weight: 300; opacity: 0.8; margin-bottom: 1rem; line-height: 1.4; }
        .blog-post-card .post-card-date { margin-top: auto; font-size: 0.8rem; opacity: 0.6; padding-top: 1rem; }
        .gold-button { display: inline-block; text-align: center; background: none; border: none; color: var(--primary); padding: 0.8rem 1.5rem; font-size: 1rem; border-radius: 50px; position: relative; overflow: hidden; cursor: pointer; z-index: 1; transition: color 0.3s; border: 1px solid rgba(212, 175, 55, 0.3); box-shadow: 4px 4px 8px var(--shadow-dark), -4px -4px 8px var(--shadow-light); }
        .gold-button::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: var(--primary); z-index: -1; clip-path: circle(0% at 50% 50%); transition: clip-path 0.5s ease; }
        .gold-button:hover { color: var(--bg); } .gold-button:hover::before { clip-path: circle(100% at 50% 50%); }
        
        header { padding: 4rem 2rem 2rem; margin-bottom: 3rem; display: flex; flex-direction: column; align-items: center; }
        .logo { font-size: clamp(1.5rem, 6vw, 3.5rem); letter-spacing: clamp(0.15rem, 2vw, 0.5rem); white-space: nowrap; font-weight: 300; color: var(--primary); position: relative; display: inline-block; }
        .logo span { display: inline-block; opacity: 0; transform: translateY(20px); animation: letterAppear 0.8s forwards; }
        @keyframes letterAppear { to { opacity: 1; transform: translateY(0); } }
        .logo span:nth-child(1) { animation-delay: 0.1s; }
        .logo span:nth-child(2) { animation-delay: 0.2s; }
        .logo span:nth-child(3) { animation-delay: 0.3s; }
        .logo span:nth-child(4) { animation-delay: 0.4s; }
        .logo span:nth-child(5) { animation-delay: 0.5s; }
        .logo span:nth-child(6) { animation-delay: 0.6s; }
        .logo span:nth-child(7) { animation-delay: 0.7s; }
        .subtitle { margin-top: 1rem; font-weight: 300; letter-spacing: 0.3rem; opacity: 0; transform: translateY(20px); animation: fadeInUp 1s 1.5s forwards; }
        @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }
        nav { display: flex; justify-content: center; align-items: center; margin-bottom: 3rem; flex-wrap: wrap; gap: 1rem; }
        
        #page-content-wrapper { display: none; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 2rem; }
        #main-h1, #main-h2 { text-align: center; opacity: 0; animation: titleFadeIn 1.2s forwards; text-transform: uppercase; } #main-h1 { font-size: clamp(0.9rem, 2.5vw, 1.1rem); font-weight: 400; color: var(--text-light); letter-spacing: 0.15rem; margin-bottom: 0.75rem; animation-delay: 1.8s; } #main-h2 { font-size: clamp(0.7rem, 2vw, 0.8rem); font-weight: 300; color: var(--primary); letter-spacing: 0.1rem; margin-bottom: 3.5rem; animation-delay: 2.0s; } @keyframes titleFadeIn { from { opacity: 0; transform: translateY(25px); } to { opacity: 1; transform: translateY(0); } }
        @media (max-width: 500px) { #main-h1 { font-size: 2.8vw; letter-spacing: 0.1rem; } #main-h2 { font-size: 2.3vw; letter-spacing: 0.08rem; margin-bottom: 2.5rem; } }

        .main-nav { display: flex; justify-content: center; flex-wrap: wrap; gap: 1rem; width: 100%;} 
        .nav-link { margin: 0 1rem; color: var(--text-light); text-decoration: none; position: relative; padding: 0.5rem 0; opacity: 0; animation: fadeIn 1s forwards; animation-delay: calc(var(--delay) * 0.2s); } @keyframes fadeIn { to { opacity: 1; } } 
        .nav-link::after { content: ''; position: absolute; bottom: 0; left: 0; width: 0; height: 1px; background: var(--primary); transition: width 0.3s ease; } .nav-link:hover::after, .nav-link.active::after { width: 100%; }
        .nav-item { position: relative; }
        .has-dropdown > .nav-link { cursor: pointer; padding-right: 15px; }
        .has-dropdown > .nav-link::before { 
            content: '▼';
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%) scale(0.6);
            font-size: 0.8em;
            color: rgba(212, 175, 55, 0.7);
            transition: transform 0.3s ease;
        }
        .has-dropdown > .nav-link.active::before { transform: translateY(-50%) scale(0.6) rotate(180deg); }
        .dropdown-menu { position: absolute; top: 100%; left: 50%; z-index: 100; margin-top: 1rem; min-width: 200px; list-style: none; background: var(--glass); border: 1px solid rgba(212, 175, 55, 0.1); border-radius: 16px; box-shadow: 8px 8px 16px var(--shadow-dark), -8px -8px 16px var(--shadow-light); backdrop-filter: blur(12px); padding: 0.75rem; display: flex; flex-direction: column; gap: 0.25rem; opacity: 0; visibility: hidden; transform: translate(-50%, -15px); transition: opacity 0.4s ease, visibility 0.4s ease, transform 0.4s cubic-bezier(0.25, 1, 0.5, 1); }
        .dropdown-menu.active { opacity: 1; visibility: visible; transform: translate(-50%, 0); }
        .dropdown-menu li { opacity: 0; transform: translateY(-10px); transition: opacity 0.3s ease, transform 0.3s ease; }
        .dropdown-menu.active li { opacity: 1; transform: translateY(0); transition-delay: calc(var(--i) * 0.07s); }
        .dropdown-link { display: block; padding: 0.6rem 1rem; color: var(--text-light); text-decoration: none; border-radius: 8px; transition: background-color 0.3s ease, color 0.3s ease; font-size: 0.9rem; text-align: center; }
        .dropdown-link:hover, .dropdown-link.active { background-color: rgba(212, 175, 55, 0.1); color: var(--primary); }
        .dropdown-link-all { border-bottom: 1px solid rgba(212, 175, 55, 0.1); margin-bottom: 0.5rem; font-weight: bold; }
        @media (max-width: 768px) {
            .main-nav { flex-wrap: nowrap; gap: 0.8rem; justify-content: center; width: 100%; }
            .nav-link { font-size: 0.8rem; margin: 0; padding: 0.5rem 0.1rem; white-space: nowrap; }
            .has-dropdown > .nav-link { padding-right: 12px; }
        }
    </style>
</head>
<body>
    <div id="particles-js"></div>
    <header>
        <a href="index.html" style="text-decoration: none;">
            <div class="logo">
                <span>A</span><span>B</span><span>O</span><span>U</span><span>T</span> <span>M</span><span>E</span>
            </div>
        </a>
        <p class="subtitle">NINO KARTSIVADZE</p>
    </header>
    
    <nav></nav>
    
    <!-- ИСПРАВЛЕНИЕ: Контейнер только для заголовков, как на других страницах -->
    <div class="container">
        <h1 id="main-h1">Crafted in Tbilisi: My Story</h1>
        <h2 id="main-h2">FROM MY HANDS AND HEART TO YOU</h2>
    </div>

    <!-- ИСПРАВЛЕНИЕ: Основной контент страницы вынесен из .container для сохранения исходных размеров -->
    <div id="page-content-wrapper">
        <div class="page-container">
            <div class="about-body">
                <div class="slideshow-container" id="about-slideshow"></div>
                <div class="about-details" id="about-text">
                    <p>Loading biography...</p>
                </div>
            </div>
            <a href="index.html" class="back-link">← Back to Showcase</a>
        </div>
        <div class="related-container" id="related-posts">
            <h2 class="related-title">Read my articles</h2>
            <div class="related-grid" id="related-posts-grid"></div>
        </div>
        <div class="related-container" id="related-products">
            <h2 class="related-title">Featured jewelry</h2>
            <div class="related-grid" id="related-products-grid"></div>
        </div>
    </div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <script>
        const CURRENT_PAGE_TYPE = 'about'; 

        function initializeSite() {
            const firebaseConfig = {
                apiKey: "AIzaSyAxOUOxaufE60eVuyOq_P66MJ9ls_7p470", authDomain: "nini-shop-7c89d.firebaseapp.com", projectId: "nini-shop-7c89d", storageBucket: "nini-shop-7c89d.appspot.com", messagingSenderId: "595482257713", appId: "1:595482257713:web:3e3d3bf75f03c08e58a810", measurementId: "G-0HX4N09DYT"
            };
            if (!firebase.apps.length) { firebase.initializeApp(firebaseConfig); }
            const db = firebase.firestore();

            const particleConfig = { "particles": { "number": { "value": 80, "density": { "enable": true, "value_area": 800 }}, "color": { "value": "#D4AF37" }, "shape": { "type": "circle" }, "opacity": { "value": 0.5, "random": true, "anim": { "enable": true, "speed": 1, "opacity_min": 0.1 }}, "size": { "value": 3, "random": true, "anim": { "enable": true, "speed": 2, "size_min": 0.1 }}, "line_linked": { "enable": true, "distance": 150, "color": "#D4AF37", "opacity": 0.2, "width": 1 }, "move": { "enable": true, "speed": 1, "direction": "none", "random": true, "out_mode": "out" }}, "interactivity": { "events": { "onhover": { "enable": true, "mode": "grab" }, "onclick": { "enable": true, "mode": "push" }}}, "retina_detect": true };
            if (document.getElementById('particles-js')) particlesJS('particles-js', particleConfig);

            let categories = {};

            async function initializeData() {
                try {
                    const categoriesSnapshot = await db.collection('categories').orderBy('name').get();
                    categories = {};
                    categoriesSnapshot.forEach(doc => { categories[doc.id] = { id: doc.id, ...doc.data() }; });
                    renderNavigation();
                    setupNavigationListeners();
                } catch (error) { console.error("Error loading categories:", error); }
            }

            function renderNavigation() {
                const nav = document.querySelector('nav');
                if (!nav) return;
                nav.innerHTML = '<div class="main-nav"></div>';
                const mainNavContainer = nav.querySelector('.main-nav');
                let delay = 1;

                const mainLinks = [
                    { href: 'index.html', text: 'ENAMEL', id: 'enamel', hasDropdown: true },
                    { href: 'cast.html', text: 'CAST', id: 'cast', hasDropdown: true },
                    { href: 'about.html', text: 'ABOUT ME', id: 'about', hasDropdown: false },
                    { href: 'blog.html', text: 'BLOG', id: 'blog', hasDropdown: true }
                ];

                mainLinks.forEach(linkInfo => {
                    const navItem = document.createElement('div');
                    navItem.className = 'nav-item';
                    
                    if (linkInfo.hasDropdown) {
                        navItem.classList.add('has-dropdown');
                        const link = document.createElement('a');
                        link.href = linkInfo.href;
                        link.className = 'nav-link';
                        link.textContent = linkInfo.text;
                        link.style.setProperty('--delay', delay++);
                        navItem.appendChild(link);
                        
                        const dropdownMenu = document.createElement('ul');
                        dropdownMenu.className = 'dropdown-menu';
                        let subDelay = 1;

                        if (linkInfo.id === 'enamel' || linkInfo.id === 'cast') {
                            const subCategories = (categories && typeof categories === 'object') ? Object.values(categories).filter(cat => cat && cat.parent === linkInfo.id) : [];
                            let showAllItem = `<li style="--i: ${subDelay++}"><a href="${linkInfo.href}" class="dropdown-link dropdown-link-all">SHOW ALL</a></li>`;
                            const subCategoryItems = subCategories.map(cat => (cat.id && cat.name) ? `<li style="--i: ${subDelay++}"><a href="${linkInfo.href}?category=${cat.id}" class="dropdown-link">${cat.name.toUpperCase()}</a></li>` : '').join('');
                            dropdownMenu.innerHTML = showAllItem + subCategoryItems;
                        } else if (linkInfo.id === 'blog') {
                            const blogLinks = [
                                { href: 'blog.html', text: 'SHOW ALL POSTS' },
                                { href: 'blog.html?lang=en', text: 'ENGLISH' },
                                { href: 'blog.html?lang=ka', text: 'GEORGIAN' },
                                { href: 'blog.html?lang=ru', text: 'RUSSIAN' }
                            ];
                            dropdownMenu.innerHTML = blogLinks.map((blogLink, index) => `<li style="--i: ${subDelay++}"><a href="${blogLink.href}" class="dropdown-link ${index === 0 ? 'dropdown-link-all' : ''}">${blogLink.text}</a></li>`).join('');
                        }
                        navItem.appendChild(dropdownMenu);
                    } else {
                        const link = document.createElement('a');
                        link.href = linkInfo.href;
                        link.className = 'nav-link';
                        link.textContent = linkInfo.text;
                        link.style.setProperty('--delay', delay++);
                        if (linkInfo.id === CURRENT_PAGE_TYPE) link.classList.add('active');
                        navItem.appendChild(link);
                    }
                    mainNavContainer.appendChild(navItem);
                });
            }

            function setupNavigationListeners() {
                document.querySelectorAll('.has-dropdown > .nav-link').forEach(trigger => {
                    trigger.addEventListener('click', function(e) {
                        const dropdownMenu = this.nextElementSibling;
                        if (dropdownMenu) e.preventDefault();
                        const wasActive = dropdownMenu && dropdownMenu.classList.contains('active');
                        document.querySelectorAll('.dropdown-menu.active').forEach(menu => menu.classList.remove('active'));
                        document.querySelectorAll('.has-dropdown > .nav-link.active').forEach(link => { if (!link.href.includes('about.html')) link.classList.remove('active'); });
                        if (dropdownMenu && !wasActive) {
                            dropdownMenu.classList.add('active');
                            this.classList.add('active');
                        } else { if (!this.href.includes('about.html')) this.classList.remove('active'); }
                    });
                });
                document.addEventListener('click', function(e) {
                    if (!e.target.closest('.has-dropdown')) {
                        document.querySelectorAll('.dropdown-menu.active').forEach(menu => menu.classList.remove('active'));
                        document.querySelectorAll('.has-dropdown > .nav-link.active').forEach(link => { if (!link.href.includes('about.html')) link.classList.remove('active'); });
                    }
                });
                 const aboutLink = document.querySelector('nav a[href="about.html"]');
                if(aboutLink) aboutLink.classList.add('active');
            }

            function isYoutubeUrl(url) { return /^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.?be)\/.+$/.test(url); }
            function getYoutubeEmbedUrl(url) { let videoId; try { const urlObj = new URL(url); videoId = (urlObj.hostname === 'youtu.be') ? urlObj.pathname.slice(1) : urlObj.searchParams.get('v'); } catch(e) { return null; } if (!videoId) return null; const params = new URLSearchParams({ enablejsapi: 1, autoplay: 1, mute: 1, loop: 1, playlist: videoId, origin: window.location.origin, controls: 0 }); return `https://www.youtube.com/embed/${videoId}?${params.toString()}`; }
            function createMediaElement(mediaUrl, title) { if (isYoutubeUrl(mediaUrl)) { const embedUrl = getYoutubeEmbedUrl(mediaUrl); if (!embedUrl) return null; const wrapper = document.createElement('div'); wrapper.className = 'slideshow-item slideshow-item-video'; const iframe = document.createElement('iframe'); iframe.src = embedUrl; iframe.title = title + ' - YouTube Video'; wrapper.appendChild(iframe); return wrapper; } else { const img = document.createElement('img'); img.src = mediaUrl; img.alt = title; img.className = 'slideshow-item'; return img; } }
            function setupSlideshow(container) { const slides = Array.from(container.querySelectorAll('.slideshow-item, .slideshow-item-video')); if (slides.length <= 1) { if (slides.length === 1) slides[0].classList.add('active'); return; } if (container.querySelector('.slideshow-overlay')) return; const overlay = document.createElement('div'); overlay.className = 'slideshow-overlay'; container.appendChild(overlay); let currentIndex = 0; let intervalId = setInterval(() => showSlide(currentIndex + 1), 5000); function showSlide(index) { const oldSlide = slides[currentIndex]; if (oldSlide) oldSlide.classList.remove('active'); currentIndex = (index + slides.length) % slides.length; const newSlide = slides[currentIndex]; if (newSlide) setTimeout(() => newSlide.classList.add('active'), 1300); } function manualSlide(direction) { clearInterval(intervalId); showSlide(currentIndex + direction); intervalId = setInterval(() => showSlide(currentIndex + 1), 5000); } let touchStartX = 0; overlay.addEventListener('mousedown', e => { touchStartX = e.clientX; clearInterval(intervalId); }); overlay.addEventListener('mouseup', e => { if (e.clientX < touchStartX - 50) manualSlide(1); else if (e.clientX > touchStartX + 50) manualSlide(-1); intervalId = setInterval(() => showSlide(currentIndex + 1), 5000); }); showSlide(0); }
            async function loadRelatedPosts() { const container = document.getElementById('related-posts'); const grid = document.getElementById('related-posts-grid'); if (!container || !grid) return; grid.innerHTML = ''; const snapshot = await db.collection('blog_posts').orderBy('timestamp', 'desc').limit(3).get(); if (!snapshot.empty) { container.style.display = 'block'; setTimeout(() => container.classList.add('loaded'), 150); snapshot.docs.forEach(doc => { const post = doc.data(); let displayLang = '', displaySlug = '', displayTitle = '', displaySubtitle = ''; if (post.i18n?.en?.slug) { displayLang = 'en'; displaySlug = post.i18n.en.slug; displayTitle = post.i18n.en.title; displaySubtitle = post.i18n.en.subtitle; } else if (post.i18n?.ka?.slug) { displayLang = 'ka'; displaySlug = post.i18n.ka.slug; displayTitle = post.i18n.ka.title; displaySubtitle = post.i18n.ka.subtitle; } else if (post.i18n?.ru?.slug) { displayLang = 'ru'; displaySlug = post.i18n.ru.slug; displayTitle = post.i18n.ru.title; displaySubtitle = post.i18n.ru.subtitle; } else { return; } const cardLink = document.createElement('a'); cardLink.href = `post.html?slug=${displaySlug}&lang=${displayLang}`; cardLink.className = 'blog-post-card'; const slideshowHTML = `<div class="slideshow-container">${(post.mediaUrls || ['https://via.placeholder.com/280x250.png/121212/D4AF37?text=No+Image']).map(url => createMediaElement(url, displayTitle)?.outerHTML || '').join('')}</div>`; const postInfoHTML = `<div class="post-card-content"><h3 class="post-card-title">${displayTitle || 'Untitled'}</h3>${displaySubtitle ? `<h4 class="post-card-subtitle">${displaySubtitle}</h4>` : ''}<p class="post-card-date">${post.timestamp ? new Date(post.timestamp.seconds * 1000).toLocaleDateString() : ''}</p></div>`; cardLink.innerHTML = slideshowHTML + postInfoHTML; grid.appendChild(cardLink); setupSlideshow(cardLink.querySelector('.slideshow-container')); }); } }
            async function loadRandomProducts() { const container = document.getElementById('related-products'); const grid = document.getElementById('related-products-grid'); grid.innerHTML = ''; const snapshot = await db.collection('products').get(); let allProducts = []; snapshot.forEach(doc => allProducts.push(doc.data())); if (allProducts.length > 0) { const randomProducts = allProducts.sort(() => 0.5 - Math.random()).slice(0, 3); container.style.display = 'block'; setTimeout(() => container.classList.add('loaded'), 250); randomProducts.forEach(product => { const productCard = document.createElement('a'); productCard.href = `product.html?slug=${product.slug}`; productCard.className = 'product-card'; const slideshowHTML = `<div class="slideshow-container">${(product.images || []).map(url => createMediaElement(url, product.title)?.outerHTML || '').join('')}</div>`; const productInfoHTML = `<div class="product-info"><h3 class="product-title">${product.title}</h3><p class="product-price">${product.price}</p><div class="gold-button">VIEW DETAILS</div></div>`; productCard.innerHTML = slideshowHTML + productInfoHTML; grid.appendChild(productCard); setupSlideshow(productCard.querySelector('.slideshow-container')); }); } }
            async function populateAboutContent() {
                try {
                    const doc = await db.collection('site_content').doc('about_me').get();
                    if (!doc.exists) { console.error("About Me content not found."); document.getElementById('page-content-wrapper').style.display = 'block'; return; }
                    const content = doc.data();
                    const slideshowContainer = document.getElementById('about-slideshow');
                    const textContainer = document.getElementById('about-text');
                    if (slideshowContainer && content.images && content.images.length > 0) {
                        slideshowContainer.innerHTML = '';
                        content.images.forEach(url => { const mediaElement = createMediaElement(url, 'About Nino Kartsivadze'); if (mediaElement) slideshowContainer.appendChild(mediaElement); });
                        setupSlideshow(slideshowContainer);
                        document.querySelector('meta[property="og:image"]').setAttribute('content', content.images[0]);
                    }
                    if(textContainer && content.text) { textContainer.innerHTML = content.text.split('\n').filter(p => p.trim() !== '').map(p => `<p>${p}</p>`).join(''); }
                    const schemaScript = document.getElementById('about-person-schema');
                    if (schemaScript) {
                        const plainTextDescription = content.text ? content.text.replace(/<[^>]*>/g, '').replace(/\s\s+/g, ' ').trim() : 'Nino Kartsivadze is a Georgian artist specializing in the ancient craft of cloisonné enamel...';
                        schemaScript.textContent = JSON.stringify({ "@context": "https://schema.org", "@type": "Person", "name": "Nino Kartsivadze", "jobTitle": "Cloisonné Enamel Artist", "url": window.location.href, "image": (content.images && content.images.length > 0) ? content.images[0] : "", "sameAs": [], "description": plainTextDescription, "knowsAbout": ["Cloisonné", "Enamel jewelry", "Minankari", "Artisan Jewelry"], "homeLocation": { "@type": "Place", "name": "Tbilisi, Georgia" } }, null, 2);
                    }
                    const mainWrapper = document.getElementById('page-content-wrapper');
                    mainWrapper.style.display = 'block';
                    mainWrapper.querySelector('.page-container').classList.add('loaded');
                } catch (error) { 
                    console.error("Error populating About Me content:", error); 
                    const textContainer = document.getElementById('about-text');
                    if (textContainer) textContainer.innerHTML = "<p>Could not load biography. Please try again later.</p>";
                    document.getElementById('page-content-wrapper').style.display = 'block';
                }
            }
            
            initializeData();
            populateAboutContent();
            loadRelatedPosts();
            loadRandomProducts();
        }

        document.addEventListener('DOMContentLoaded', initializeSite);
    </script>
</body>
</html>